
1.COMMIT

mysql> set autocommit=0;
Query OK, 0 rows affected (0.00 sec)

mysql> insert into product values(101,'pen',10);
Query OK, 1 row affected (0.01 sec)

mysql> commit;
Query OK, 0 rows affected (0.00 sec)



2.ROLLBACK


mysql> set autocommit=0;
Query OK, 0 rows affected (0.00 sec)

mysql> insert into student values(10,'manu',15,'m');
Query OK, 1 row affected (0.01 sec)

mysql> select * from student;
+---------+------+------+--------+
| roll_no | name | age  | gender |
+---------+------+------+--------+
|      10 | manu |   15 | m      |
+---------+------+------+--------+
1 row in set (0.00 sec)

mysql> rollback;
Query OK, 0 rows affected (0.01 sec)

mysql> select * from student;
Empty set (0.00 sec)




3.SAVEPOINT


mysql> set autocommit=0;
Query OK, 0 rows affected (0.00 sec)

mysql> insert into product values(102,'pencil',5);
Query OK, 1 row affected (0.00 sec)

mysql> insert into product values(104,'soap',25);
Query OK, 1 row affected (0.01 sec)

mysql> savepoint sp1;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from product;
+--------+----------+-------+
| prd_id | prd_name | price |
+--------+----------+-------+
|    102 | pencil   |     5 |
|    104 | soap     |    25 |
+--------+----------+-------+
2 rows in set (0.00 sec)

mysql> update product set price = 15 where prd_id=102;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> savepoint sp2;
Query OK, 0 rows affected (0.00 sec)

mysql> insert into product values(105,'notebook',20);
Query OK, 1 row affected (0.00 sec)

mysql> savepoint sp3;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from product;
+--------+----------+-------+
| prd_id | prd_name | price |
+--------+----------+-------+
|    102 | pencil   |    15 |
|    104 | soap     |    25 |
|    105 | notebook |    20 |
+--------+----------+-------+
3 rows in set (0.00 sec)

mysql> delete from product where prd_id=103;
Query OK, 0 rows affected (0.00 sec)

mysql> delete from product where prd_id=102;
Query OK, 1 row affected (0.00 sec)

mysql> select * from product;
+--------+----------+-------+
| prd_id | prd_name | price |
+--------+----------+-------+
|    104 | soap     |    25 |
|    105 | notebook |    20 |
+--------+----------+-------+
2 rows in set (0.00 sec)

mysql> rollback to sp3;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from product;
+--------+----------+-------+
| prd_id | prd_name | price |
+--------+----------+-------+
|    102 | pencil   |    15 |
|    104 | soap     |    25 |
|    105 | notebook |    20 |
+--------+----------+-------+
3 rows in set (0.01 sec)

mysql> rollback to sp1;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from product;
+--------+----------+-------+
| prd_id | prd_name | price |
+--------+----------+-------+
|    102 | pencil   |     5 |
|    104 | soap     |    25 |
+--------+----------+-------+
2 rows in set (0.00 sec)

mysql> commit;
Query OK, 0 rows affected (0.00 sec)


b) DCL COMMAND 
 Create two users user1, user2 


mysql> CREATE USER 'user1'@'localhost' IDENTIFIED BY 'User1@2026Secure';
Query OK, 0 rows affected (0.01 sec)

mysql> CREATE USER 'user2'@'localhost' IDENTIFIED BY 'User@2026Secure';
Query OK, 0 rows affected (0.01 sec)


1. GRANT:   Give insert and select privilege to user 1 on customer table in the invoice database.
Give update and delete privilege to user 2 on all tables in the invoice database. 

mysql> grant insert,select on INVOICE.customer to 'user1'@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql> show grants for 'user1'@'localhost';
+---------------------------------------------------------------------+
| Grants for user1@localhost                                          |
+---------------------------------------------------------------------+
| GRANT USAGE ON *.* TO `user1`@`localhost`                           |
| GRANT SELECT, INSERT ON `INVOICE`.`customer` TO `user1`@`localhost` | 								      
+---------------------------------------------------------------------+
3 rows in set (0.00 sec)


mysql> grant update,delete on INVOICE.* to 'user2'@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql> show grants for 'user2'@'localhost';
+-----------------------------------------------------------------+
| Grants for user2@localhost                                      |
+-----------------------------------------------------------------+
| GRANT USAGE ON *.* TO `user2`@`localhost`                       |
| GRANT UPDATE, DELETE ON `INVOICE`.* TO `user2`@`localhost`      | 								  
+-----------------------------------------------------------------+
3 rows in set (0.00 sec)


2. REVOKE: Remove delete privilege of user 2.

mysql> REVOKE DELETE ON INVOICE.* from 'user2'@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql> show grants for 'user2'@'localhost';
+-----------------------------------------------------------------+
| Grants for user2@localhost                                      |
+-----------------------------------------------------------------+
| GRANT USAGE ON *.* TO `user2`@`localhost`                       |
| GRANT UPDATE ON `INVOICE`.* TO `user2`@`localhost`              | 								  
+-----------------------------------------------------------------+
3 rows in set (0.00 sec)



